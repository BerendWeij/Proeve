<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"deathScreen.js.html":{"id":"deathScreen.js.html","title":"Source: deathScreen.js","body":" VivaMacho Classes deathStategameStatehighscoreStateloadStatemainMenuStateshopState Source: deathScreen.js /** * @Class * @name deathState * @desc state that starts when the player loses in the game state. * @property {number} deathScoreValue - current score that is shown in the death screen. * @property {number} deathHighestScoreValue - highest score the player had that is shown in the death screen. * @property {sound} deathScreenBGMusic - sound that is played on lose. * @property {fontStyle} style - style of the font in the screen. */ var deathState = { deathScoreValue: 0, deathHighestScoreValue: 0, deathScreenBGMusic: null, preload: function(){ this.deathScreenBGMusic = game.add.audio('gameOverSound'); this.deathScreenBGMusic.volume = 0.2; }, /** @method * @name create * @memberof deathState * @description this is a create function that is fired after the preload function, this is where we create variables and images */ create: function() { this.deathScreenBGMusic.play(); this.background = game.add.tileSprite(0, 0, game.world.width, game.world.height, setName); this.screenSprite = game.add.sprite(game.world.centerX , game.world.centerY, 'deathscreenBackground'); this.screenSprite.anchor.setTo(0.5, 0.5); this.screenSprite.scale.setTo(1.5,1.5); var backButton; backButton = game.add.button(100, 100, 'backButton', function() { this.deathScreenBGMusic.stop(); game.state.start('mainMenu'); }, this); backButton.anchor.setTo(0.5, 0.5); var replayButton; replayButton = game.add.button(game.world.centerX - 90, game.world.centerY + 90, 'playButton', function() { this.deathScreenBGMusic.stop(); game.state.start('game'); }, this); //replayButton.anchor.setTo(0.5, 0.5); replayButton.scale.setTo(0.75,0.75); style = {}; // Font style style.font = 'Passion One'; style.fontSize = 75; style.fontWeight = 'bold'; // Stroke color and thickness //style.stroke = '#0C090A'; //style.strokeThickness = 7; //style.fill = '#52D017'; // Stroke color and thickness style.stroke = '#FFFF00'; style.strokeThickness = 3; style.fill = '#FF2828'; var highscoreText = game.add.text(game.world.centerX, game.world.centerY - 100, &quot;HIGHEST = &quot; + deathHighestScoreValue,style); var scoreText = game.add.text(game.world.centerX, game.world.centerY, &quot;SCORE = &quot; + deathScoreValue,style); var loseText = game.add.text(game.world.centerX, game.world.centerY - 200, &quot;REPLAY?&quot;,style); highscoreText.anchor.setTo(0.5); scoreText.anchor.setTo(0.5); loseText.anchor.setTo(0.5); }, setScreenValues: function(score,highestscore) { deathScoreValue = score; deathHighestScoreValue = highestscore; if(highestscore == null) { deathHighestScoreValue = 0; } else { deathHighestScoreValue = deathHighestScoreValue; } } }; Ã— Search results Close "},"game.js.html":{"id":"game.js.html","title":"Source: game.js","body":" VivaMacho Classes deathStategameStatehighscoreStateloadStatemainMenuStateshopState Source: game.js // Game state. var highScore = 0; var points = 0; var hardMode = true; /** * @Class * @name gameState * @desc state in which the game is played. * @property {particle} ingameEmitter - Particle emmiter for the ball. * @property {tween} tweenAPosition - First tween position for the goal. * @property {tween} tweenBPosition - Second tween position for the goal. * @property {tween} textTween - Tween to scale the text on score. * @property {text} textScore - text field. * @property {sound} tapSound - Sound that plays on tap/click. * @property {sound} startSound - Sound that plays on start. * @property {sound} inGameBGMusic - Sound that plays after the start sound and loops. * @property {object} gameobjects - gameobjects in the gameState. * @property {tileSprite} backgrounds - Background sprite. * @property {object} walls - The wall objects that the ball can bounce on. * @property {number} charNr - Number of the current character selected. * @property {number} score - Score for getting the ball into the goal. * @property {number} tempScore - A temporary score for trickshots. * @property {string} currentHighscore - How much gold the party starts with. * @property {string} setName - Name for selecting a random background. */ var gameState = { // Custom &quot;variables&quot;. ingameEmitter: null, tweenAPosition: 0, tweenBPosition: 300, tween: null, textTween: null, text: null, tapSound: null, startSound: null, inGameBGMusic: null, setName: null, gameobjects: null, backgrounds: null, walls: null, charNr: 0, score: 0, tempScore: 0, currentHighscore: new Array(), /** @method * @name preload * @memberof gameState * @description this is a preload function that is fired before the create function, this is where we create variables and images */ preload: function() { // Load tapsound. menuBGMusic.stop(); var tapSound = localStorage.getItem('characterSound'); if (tapSound == null || tapSound == &quot;null&quot;) { tapSound = 'click2.wav'; } game.load.audio('tapSound', 'assets/audio/soundeffect/' + tapSound); // setting game relevant sounds. startSound = game.add.audio('startSound'); inGameBGMusic = game.add.audio('inGameBG'); startSound.onStop.add(this.startBG,this); //making object groups. this.gameobjects = game.add.group(); this.backgrounds = game.add.group(); this.walls = game.add.group(); var randomValue = Math.floor(Math.random() * 4) + 0; setName = &quot;backgroundGame&quot; + randomValue; }, /** @method * @name create * @memberof gameState * @description this is a create function that is fired after the preload function, this is where we set all the variables */ create: function() { //set tween movement speed. tweenValue = 5000; startSound.volume = 0.2; startSound.play(); // Load character number. var characterInt = 0; var str_character = parseInt(localStorage.getItem('characterImageNr'), 10); if (str_character == null || str_character == &quot;null&quot; || isNaN(str_character)) { characterInt = 0; } else { characterInt = str_character; } // Load highscore. var str_score = JSON.parse(localStorage.getItem('highScore')); if (str_score == null || str_score == &quot;null&quot;) { } else { this.currentHighscore = str_score; } // this has to be active for the fps to be counting. game.time.advancedTiming = true; //set the game physics. game.physics.startSystem(Phaser.Physics.ARCADE); game.physics.arcade.gravity.y = 1500; //bring game objects to the top of the screen(layering). game.world.bringToTop(this.backgrounds); game.world.bringToTop(this.walls); game.world.bringToTop(this.gameobjects); // sounds tapSound = game.add.audio('tapSound'); //set tween position this.tweenAPosition = game.world.width - 300; // Add gameobjects to game this.ball = game.add.sprite(game.world.centerX, 20, 'character' + characterInt); this.goal = game.add.sprite(this.tweenAPosition, game.world.height - 50, 'goal'); this.ballIsAnimated = this.ball.animations.validateFrames([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]); if (this.ballIsAnimated) { this.ball.animations.add('idle', [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], 10, false); this.ball.animations.add('tapnimation', [12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23], 24, false); this.ball.animations.play('idle'); } this.walls.create(-70, game.world.height, 'wall'); this.walls.create(game.world.width + 70, game.world.height, 'wall'); this.walls.create(game.world.width / 2, game.world.height + (game.world.height / 2), 'wall'); this.background = game.add.tileSprite(0, 0, game.world.width, game.world.height, setName); game.physics.arcade.enable([ this.ball, this.goal, this.walls ]); // Background setup this.backgrounds.add(this.background); // Ball setup this.ball.anchor.setTo(0.5, 0.5); this.ball.body.bounce.setTo(0.5, 0.5); this.gameobjects.add(this.ball); // Goal setup this.goal.anchor.setTo(0.5, 0.5); this.goal.body.immovable = true; this.goal.body.allowGravity = false; this.goal.body.setSize(64, 64, 0, 0); this.gameobjects.add(this.goal); // Walls setup for (var i = 0; i &lt; this.walls.children.length; i++) { this.walls.children[i].anchor.setTo(0.5, 1); this.walls.children[i].scale.setTo(0.5, game.world.height + (game.world.height / 2)); this.walls.children[i].body.immovable = true; this.walls.children[i].body.allowGravity = false; } // Reset ceiling size this.walls.children[2].anchor.setTo(0.5); this.walls.children[2].scale.setTo(50, 0.5); // Back button. var escKey = game.input.keyboard.addKey(Phaser.Keyboard.Q); escKey.onDown.add(this.goToMain, this); // Ball control. game.input.onDown.add(this.bounce, this); //set the goals tweens. tween = this.game.add.tween(this.goal).to({ x: [this.tweenBPosition,this.tweenAPosition] }, 5000); tween.start(); tween.onComplete.add(this.setNewTweenSpeed, this); ingameEmitter = game.add.emitter(0, 0, 100); ingameEmitter.makeParticles(['cloud_particle1','cloud_particle2','cloud_particle3']); ingameEmitter.setScale(0.5, 0, 0.5, 0, 6000); game.input.onDown.add(this.particleBurst, this); //set score text scoreText = game.add.text(game.world.centerX, 20, &quot;0&quot;); // Font style scoreText.font = 'Arial Black'; scoreText.fontSize = 50; scoreText.fontWeight = 'bold'; // Stroke color and thickness scoreText.stroke = '#FFFF00'; scoreText.strokeThickness = 3; scoreText.fill = '#FF2828'; textTween = game.add.tween(scoreText).to({ fontSize:100}, 100, Phaser.Easing.Linear.None, false, 0,0,true); }, /** @method * @name update * @memberof gameState * @description this is a update function that is fired after the create function,and updates every frame. */ update: function() { game.physics.arcade.collide(this.walls, this.ball, this.wallsCollisionHandler, null, this); game.physics.arcade.collide(this.goal, this.ball, this.goalCollisionHandler, null, this); if (this.ball.world.y &gt;= game.world.height) { this.goToMain(); } if (this.goal.world.x == this.tweenAPosition) { // tweenB.start(); } else if(this.goal.world.x == this.tweenBPosition) { // tweenA.start(); } if (this.ballIsAnimated &amp;&amp; this.ball.animations.currentAnim.isFinished) { this.ball.animations.play('idle'); } }, particleBurst: function() { // Position the emitter where the mouse/touch event was ingameEmitter.x = this.ball.world.x; ingameEmitter.y = this.ball.world.y; // The first parameter sets the effect to &quot;explode&quot; which means all particles are emitted at once // The second gives each particle a 2000ms lifespan // The third is ignored when using burst/explode mode // The final parameter is how many particles will be emitted in this single burst ingameEmitter.start(true, 2000, null, 10); }, // Custom functions /** @method * @name wallsCollisionHandler * @memberof gameState * @description this is a collision function that is fired when hitting a wall and is used for adding score for a skill shot */ wallsCollisionHandler: function() { this.tempScore++; }, /** @method * @name startBG * @memberof gameState * @description this is a function that starts the background music. */ startBG: function() { inGameBGMusic.volume = 0.2; inGameBGMusic.play(); inGameBGMusic.loop = true; }, /** @method * @name goalCollisionHandler * @memberof gameState * @description this is a collision function that is fired when the ball hits the goal and is used for adding score for a skill shot */ goalCollisionHandler: function() { //game.state.start('game'); this.score += this.tempScore + 1; this.tempScore = 0; this.setScoreText(); this.ball.body.velocity.setTo(0, 0); this.ball.body.angularVelocity = 0; this.ball.position.x = game.rnd.integerInRange(this.tweenAPosition,this.tweenBPosition); this.ball.position.y = 0; }, /** @method * @name setNewTweenSpeed * @memberof gameState * @description this function is fired when the goal tween is completed and keeps looping with a random speed. */ setNewTweenSpeed: function(){ tween = this.game.add.tween(this.goal).to({ x: [this.tweenBPosition,this.tweenAPosition] }, game.rnd.integerInRange(2500,5000)); tween.start(); tween.onComplete.add(this.setNewTweenSpeed, this); }, /** @method * @name setScoreText * @memberof gameState * @description this is a function that is fired when the ball hits the goal and is used for updateing the score text on the UI. */ setScoreText: function() { scoreText.text = this.score; textTween.start(); }, /** @method * @name bounce * @memberof gameState * @description this is a function that is fired when the player taps the screen and is used for the ball movement. */ bounce: function() { var yVelocity = 0; this.tempScore = 0; tapSound.play(); if (this.ballIsAnimated) { this.ball.animations.play('tapnimation'); } if (game.input.activePointer.y &gt; this.ball.y) { yVelocity = -800; } else { this.tempScore++; yVelocity = this.ball.body.velocity.y + 800; } if (hardMode == true) { var xVelocity = Phaser.Math.difference(game.input.activePointer.x, this.ball.x); this.ball.body.angularVelocity = angVelocity = this.ball.x - game.input.activePointer.x; if (game.input.activePointer.x &gt; this.ball.x) { this.ball.body.velocity.setTo(this.ball.body.velocity.x + -xVelocity, yVelocity); } else { this.ball.body.velocity.setTo(this.ball.body.velocity.x + xVelocity, yVelocity); } } else { this.ball.body.velocity.setTo(this.ball.body.velocity.x, yVelocity); } }, /** @method * @name goToMain * @memberof gameState * @description this is a function that returns the player to the main menu. */ goToMain: function() { inGameBGMusic.stop(); startSound.onStop.remove(this.startBG,this); startSound.stop(); if (this.score &gt; localStorage.getItem('highestScore') &amp;&amp; this.score != 0 || this.score &gt; 0 &amp;&amp; this.currentHighscore[0] == null) { this.currentHighscore.push(&quot;\\n&quot; + this.score); localStorage.setItem('highScore', JSON.stringify(this.currentHighscore)); localStorage.setItem('highestScore', this.score); } deathState.setScreenValues(this.score, localStorage.getItem('highestScore')); points += this.score; localStorage.setItem('points', points); this.score = 0; game.state.start('deathScreen'); }, }; Ã— Search results Close "},"highscoreMenu.js.html":{"id":"highscoreMenu.js.html","title":"Source: highscoreMenu.js","body":" VivaMacho Classes deathStategameStatehighscoreStateloadStatemainMenuStateshopState Source: highscoreMenu.js var highscoreList = new Array(); var highscoreNameList = new Array(); var highscoreLadderList = new Array(); /** * @Class * @name highscoreState * @desc state that shows the highscores you have obtained. * @property {number} deathScoreValue - current score that is shown in the death screen. * @property {number} deathHighestScoreValue - highest score the player had that is shown in the death screen. * @property {sound} deathScreenBGMusic - sound that is played on lose. * @property {fontStyle} style - style of the font in the score. * @property {text} titleStyle - style of the font in the screen. */ var highscoreState = { // Custom &quot;variables&quot;. style: null, titleStyle: null, // Phaser functions. create: function() { var highscoreBackground = game.add.sprite(0, 0,'highscoreBackground'); style = {}; // Font style style.font = 'Passion One'; style.fontSize = 75; style.fontWeight = 'bold'; // Stroke color and thickness style.stroke = '#FFFF00'; style.strokeThickness = 3; style.fill = '#FF2828'; titleText = game.add.text(game.world.centerX - 150, 70, &quot;HIGHSCORES&quot;); // Font style titleText.font = 'Passion One'; titleText.fontSize = 50; titleText.fontWeight = 'bold'; // Stroke color and thickness titleText.stroke = '#0020C2'; titleText.strokeThickness = 5; titleText.fill = '#2B65EC'; var escKey = game.input.keyboard.addKey(Phaser.Keyboard.Q); escKey.onDown.add(this.goToMain, this); var str_highscore = JSON.parse(localStorage.getItem('highScore')); if (str_highscore == null || str_highscore == &quot;null&quot;) { //highscoreList[0] = 0; } else { highscoreList = str_highscore; } var str_users = localStorage.getItem('users'); if (str_users == null || str_users == &quot;null&quot;) { } else { highscoreNameList = str_users; this.checkScoreValues(); } var backButton; backButton = game.add.button(100, 100, 'backButton', function() { game.state.start('mainMenu'); }, this); backButton.anchor.setTo(0.5, 0.5); }, /** @method * @name addScore * @memberof highscoreState * @description this is a function that adds a score to the highscore list */ addScore: function(scoreToAdd) { if(typeof scoreToAdd === 'number') { if(highscoreList.length &gt;= 9) { highscoreList.splice(10,1); } highscoreList.push(&quot;\\n&quot; +scoreToAdd ); } }, /** @method * @name checkScoreValues * @memberof highscoreState * @description this is a function checks the scores and in the arrays and displays them on the screen. */ checkScoreValues: function(){ highscoreLadderList = [] var sortedList = highscoreList; sortedList.sort( function(a,b) { return b - a; } ); for (var i = 0; i &lt; sortedList.length; i++) { highscoreLadderList.push(&quot;&quot; + (i+1) + &quot;.\\n&quot;); } var scoreText = game.add.text(game.world.centerX - 100 + 100, 200, '', style); scoreText.parseList(sortedList); var ladderText = game.add.text(game.world.centerX - 100, 300, '', style); ladderText.parseList(highscoreLadderList); }, goToMain: function() { game.state.start('mainMenu'); }, }; Ã— Search results Close "},"load.js.html":{"id":"load.js.html","title":"Source: load.js","body":" VivaMacho Classes deathStategameStatehighscoreStateloadStatemainMenuStateshopState Source: load.js /** * @Class * @name loadState * @type Phaser.State * @desc Loading state for loading all images in the cache. */ var loadState = { /** @method * @name preload * @memberof loadState * @description this is a preload function that is fired before the create function, this is where we create variables and images */ preload: function() { // Loading image. var loadingImage = game.add.sprite(game.world.centerX, game.world.centerY, 'loadingScreenSheet'); loadingImage.anchor.setTo(0.5); loadingImage.animations.add('loading'); loadingImage.animations.play('loading', 12, true); // Audio loading. game.load.audio('mainMenuBG','assets/audio/backgroundmusic/menus/mainMenu.wav'); game.load.audio('gameOverSound','assets/audio/backgroundmusic/menus/gameOver.wav'); game.load.audio('inGameBG','assets/audio/backgroundmusic/inGame/inGameMusicLoop.wav'); game.load.audio('startSound','assets/audio/backgroundmusic/inGame/start.wav'); // Image loading. game.load.image('backgroundGame0', 'assets/background/background.0.png'); game.load.image('backgroundGame1', 'assets/background/background.1.png'); game.load.image('backgroundGame2', 'assets/background/background.2.png'); game.load.image('backgroundGame3', 'assets/background/background.3.png'); game.load.image('backgroundGame4', 'assets/background/background.4.png'); game.load.image('goal', 'assets/goal/goal.0.png'); game.load.image('wall', 'assets/image.png'); game.load.image('deathscreenBackground', 'assets/UI/deathScreen.png'); game.load.image('playButton', 'assets/buttons/playButton.png'); game.load.image('highscoreButton', 'assets/buttons/highscoreButton.png'); game.load.image('shopButton', 'assets/buttons/shopButton.png'); game.load.image('backButton', 'assets/buttons/exitButton.png'); game.load.image('invisibleButton', 'assets/invisibleButton.png'); game.load.image('muteButton', 'assets/buttons/muteButton.png'); game.load.image('soundButton', 'assets/buttons/soundButton.png'); game.load.image('startBackground', 'assets/background/startscreen.png'); game.load.image('highscoreBackground', 'assets/background/highscorescreen.png'); game.load.image('logo', 'assets/UI/Vivamacho.png'); game.load.image('pixel_yellow', 'assets/particles/pixel_yellow.png'); game.load.image('pixel_blue', 'assets/particles/pixel_blue.png'); game.load.image('pixel_pink', 'assets/particles/pixel_pink.png'); game.load.image('cloud_particle1', 'assets/particles/cloud1Particle.png'); game.load.image('cloud_particle2', 'assets/particles/cloud2Particle.png'); game.load.image('cloud_particle3', 'assets/particles/cloud3Particle.png'); game.load.image('lock', 'assets/shop/lock.png'); game.load.image('backgroundShop', 'assets/shop/shop.0.png'); // Spriteshit loading. // TODO: Decide on how to load balls. var charactersJSON = game.cache.getJSON('characters'); if (charactersJSON != null) { if (charactersJSON.characters != null) { for (var i = 0; i &lt; charactersJSON.characters.length; i++) { game.load.spritesheet('character' + i, 'assets/balls/' + charactersJSON.characters[i].image, 128, 128); } } } }, /** @method * @name create * @memberof loadState * @description this is a create function that only starts the mainMenu state. */ create: function() { game.state.start('mainMenu'); } }; Ã— Search results Close "},"mainMenu.js.html":{"id":"mainMenu.js.html","title":"Source: mainMenu.js","body":" VivaMacho Classes deathStategameStatehighscoreStateloadStatemainMenuStateshopState Source: mainMenu.js /** * @Class * @name mainMenuState * @desc this is the main menu state in which you can navigate to most places in the game. * @property {Particle} emitter - Particle emmiter on mouse click for confetti. * @property {sound} menuBGMusic - Background music for the main menu. * @property {sprite} startBackground - Background image for the main menu. * @property {sprite} logo - Logo image for the main menu. * @property {object} startButton - Button that starts the game. * @property {object} shopButton - Button that goes to the shop. * @property {object} highscoreButton - Button that goes to the highscore. * @property {object} soundButton - Button that enables sound. * @property {object} muteButton - Button that mutes sound. * @property {object} resetLocalStorageButton - Button that removes your saved data. * @property {object} modeButton - Button that changes the play mode. */ var mainMenuState = { emitter: null, menuBGMusic: null, preload: function() { menuBGMusic = game.add.audio('mainMenuBG'); menuBGMusic.volume = 0.4; }, create: function() { menuBGMusic.loop = true; menuBGMusic.play(); game.stage.backgroundColor = '#BBBBBB'; var startBackground = game.add.sprite(0, 0,'startBackground'); var logo = game.add.sprite(0, -200, 'logo'); var startButton; startButton = game.add.button(game.world.centerX - 400, game.world.centerY - 200, 'playButton', function() { menuBGMusic.stop(); game.state.start('game'); }, this); startButton.anchor.setTo(0.5, 0.5); /** shop button to start the game. */ var shopButton; shopButton = game.add.button(game.world.centerX - 400, game.world.centerY + 50, 'shopButton', function() { menuBGMusic.stop(); game.state.start('shop'); }, this); shopButton.anchor.setTo(0.5, 0.5); var highscoreButton; highscoreButton = game.add.button(game.world.centerX - 400, game.world.centerY + 310, 'highscoreButton', function() { menuBGMusic.stop(); game.state.start('highscore'); }, this); highscoreButton.anchor.setTo(0.5, 0.5); var soundButton; soundButton = game.add.button(1600, 1400, 'soundButton', function() { game.sound.mute = false }, this); soundButton.anchor.setTo(0.5, 0.5); soundButton.scale.setTo(0.75,0.75); var muteButton; muteButton = game.add.button(1800, 1400, 'muteButton', function() { game.sound.mute = true; }, this); muteButton.anchor.setTo(0.5, 0.5); muteButton.scale.setTo(0.75,0.75); var resetLocalStorageButton = game.add.button(1990, 20, 'invisibleButton', function() { localStorage.clear(); }, this); resetLocalStorageButton.anchor.setTo(0.5, 0.5); var modeButton; modeButton = game.add.button(20, 20, 'invisibleButton', function() { hardMode = !hardMode; }, this); modeButton.anchor.setTo(0.5, 0.5); emitter = game.add.emitter(0, 0, 100); emitter.makeParticles(['pixel_yellow','pixel_pink','pixel_blue']); emitter.gravity = 200; emitter.setScale(0.5, 0, 0.5, 0, 6000); game.input.onDown.add(this.particleBurst, this); }, /** @method * @name update * @memberof mainMenuState * @description this is a update function */ update: function() { }, particleBurst: function() { // Position the emitter where the mouse/touch event was emitter.x = game.input.activePointer.x; emitter.y = game.input.activePointer.y; // The first parameter sets the effect to &quot;explode&quot; which means all particles are emitted at once // The second gives each particle a 2000ms lifespan // The third is ignored when using burst/explode mode // The final parameter (10) is how many particles will be emitted in this single burst emitter.start(true, 2000, null, 10); }, }; Ã— Search results Close "},"shopMenu.js.html":{"id":"shopMenu.js.html","title":"Source: shopMenu.js","body":" VivaMacho Classes deathStategameStatehighscoreStateloadStatemainMenuStateshopState Source: shopMenu.js /** * @Class * @name shopState * @desc state in which the game is played. * @property {object:array} characterGroup - Characters in the shop. * @property {object:array} backgroundGroup - Backgrounds in the shop. * @property {sprite} background - Shop background. * @property {object} backButton - Button for going back to the main menu. * @property {object} characterButton - Buyable character button. * @property {text} priceText - Text above each character with the price. * @property {Json} charactersJSON - JSON file with all the information on the characters. * @property {text} pointsText - text for points. * @property {sprite} characterLock - lock sprite. * */ var shopState = { // Custom &quot;variables&quot;. characterGroup: null, backgroundGroup: null, // Phaser functions. /** @method * @name preload * @memberof shopState * @description Used to set all the relevant variables in the state. */ preload: function() { this.characterGroup = game.add.group(); this.backgroundGroup = game.add.group(); game.world.bringToTop(this.backgroundGroup); game.world.bringToTop(this.characterGroup); var str_points = localStorage.getItem('points'); if (str_points == null || str_points == 'null') { points = 0; } else { points = parseInt(str_points, 10); } }, /** @method * @name create * @memberof shopState * @description Used to setup the scene for this gamestate. */ create: function() { this.background = game.add.tileSprite(0, 0, game.world.width, game.world.height, 'backgroundShop'); this.backgroundGroup.add(this.background); var backButton; backButton = game.add.button(100, 100, 'backButton', function() { game.state.start('mainMenu'); }, this); backButton.anchor.setTo(0.5, 0.5); pointsText = game.add.text(game.world.centerX, 20, &quot;Points: &quot; + points); var charactersJSON = game.cache.getJSON('characters'); var xPos = 100; for (var i = 0; i &lt; charactersJSON.characters.length; i++) { if (i % 3 == 0) { xPos += 280; yPos = 0; } yPos += 360; var characterButton = game.add.button(xPos, yPos, 'character' + i, function() { localStorage.setItem('characterImage', this.charImg); localStorage.setItem('characterImageNr', this.charNr); localStorage.setItem('characterSound', this.charSnd); }, { charNr: i, charSnd: charactersJSON.characters[i].sound, charImg: charactersJSON.characters[i].image }); if (localStorage.getItem('pricePaid' + i) != charactersJSON.characters[i].characterPrice &amp;&amp; parseInt(charactersJSON.characters[i].characterPrice, 10) &gt; 0) { var characterLock = game.add.sprite(xPos, yPos, 'lock'); var style = { font: &quot;32px Arial&quot;, fill: &quot;#ff0044&quot;, wordWrap: true, wordWrapWidth: characterLock.width, align: &quot;center&quot;, backgroundColor: &quot;#ffff00&quot; }; var priceText = game.add.text(characterLock.x, characterLock.y, charactersJSON.characters[i].characterPrice + 'pt$', style); priceText.anchor.set(0.5); characterLock.inputEnabled = true; characterLock.scale.setTo(1.1); characterLock.events.onInputDown.add(function() { if (points - this.charPrice &gt;= 0) { points -= this.charPrice; this.ptsTxt.text = 'points: ' + points; localStorage.setItem('pricePaid' + this.charIndex, this.charPrice); this.button.destroy(); } }, { charIndex: i, ptsTxt: pointsText, charPrice: charactersJSON.characters[i].characterPrice, button: characterLock }); } characterButton.input.priorityID = 0; this.characterGroup.add(characterButton); } var escKey = game.input.keyboard.addKey(Phaser.Keyboard.Q); escKey.onDown.add(this.goToMain, this); pointsText.anchor.x = 0.5; // Font style pointsText.font = 'Arial Black'; pointsText.fontSize = 50; pointsText.fontWeight = 'bold'; // Stroke color and thickness pointsText.stroke = '#0020C2'; pointsText.strokeThickness = 5; pointsText.fill = '#2B65EC'; }, // Custom functions. /** @method * @name goToMain * @memberof shopState * @description this is a function that returns the player to the main menu. */ goToMain: function() { localStorage.setItem('points', points); game.state.start('mainMenu'); } }; Ã— Search results Close "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" VivaMacho Classes deathStategameStatehighscoreStateloadStatemainMenuStateshopState Classes Classes deathState gameState highscoreState loadState mainMenuState shopState Ã— Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" VivaMacho Classes deathStategameStatehighscoreStateloadStatemainMenuStateshopState Ã— Search results Close "},"deathState.html":{"id":"deathState.html","title":"Class: deathState","body":" VivaMacho Classes deathStategameStatehighscoreStateloadStatemainMenuStateshopState Class: deathState deathState new deathState() state that starts when the player loses in the game state. Properties: Name Type Description deathScoreValue number current score that is shown in the death screen. deathHighestScoreValue number highest score the player had that is shown in the death screen. deathScreenBGMusic sound sound that is played on lose. style fontStyle style of the font in the screen. Source: deathScreen.js, line 1 Methods &lt;static&gt; create() this is a create function that is fired after the preload function, this is where we create variables and images Source: deathScreen.js, line 18 Ã— Search results Close "},"gameState.html":{"id":"gameState.html","title":"Class: gameState","body":" VivaMacho Classes deathStategameStatehighscoreStateloadStatemainMenuStateshopState Class: gameState gameState new gameState() state in which the game is played. Properties: Name Type Description ingameEmitter particle Particle emmiter for the ball. tweenAPosition tween First tween position for the goal. tweenBPosition tween Second tween position for the goal. textTween tween Tween to scale the text on score. textScore text text field. tapSound sound Sound that plays on tap/click. startSound sound Sound that plays on start. inGameBGMusic sound Sound that plays after the start sound and loops. gameobjects object gameobjects in the gameState. backgrounds tileSprite Background sprite. walls object The wall objects that the ball can bounce on. charNr number Number of the current character selected. score number Score for getting the ball into the goal. tempScore number A temporary score for trickshots. currentHighscore string How much gold the party starts with. setName string Name for selecting a random background. Source: game.js, line 7 Methods &lt;static&gt; bounce() this is a function that is fired when the player taps the screen and is used for the ball movement. Source: game.js, line 304 &lt;static&gt; create() this is a create function that is fired after the preload function, this is where we set all the variables Source: game.js, line 79 &lt;static&gt; goalCollisionHandler() this is a collision function that is fired when the ball hits the goal and is used for adding score for a skill shot Source: game.js, line 266 &lt;static&gt; goToMain() this is a function that returns the player to the main menu. Source: game.js, line 341 &lt;static&gt; preload() this is a preload function that is fired before the create function, this is where we create variables and images Source: game.js, line 53 &lt;static&gt; setNewTweenSpeed() this function is fired when the goal tween is completed and keeps looping with a random speed. Source: game.js, line 282 &lt;static&gt; setScoreText() this is a function that is fired when the ball hits the goal and is used for updateing the score text on the UI. Source: game.js, line 295 &lt;static&gt; startBG() this is a function that starts the background music. Source: game.js, line 255 &lt;static&gt; update() this is a update function that is fired after the create function,and updates every frame. Source: game.js, line 210 &lt;static&gt; wallsCollisionHandler() this is a collision function that is fired when hitting a wall and is used for adding score for a skill shot Source: game.js, line 247 Ã— Search results Close "},"highscoreState.html":{"id":"highscoreState.html","title":"Class: highscoreState","body":" VivaMacho Classes deathStategameStatehighscoreStateloadStatemainMenuStateshopState Class: highscoreState highscoreState new highscoreState() state that shows the highscores you have obtained. Properties: Name Type Description deathScoreValue number current score that is shown in the death screen. deathHighestScoreValue number highest score the player had that is shown in the death screen. deathScreenBGMusic sound sound that is played on lose. style fontStyle style of the font in the score. titleStyle text style of the font in the screen. Source: highscoreMenu.js, line 5 Methods &lt;static&gt; addScore() this is a function that adds a score to the highscore list Source: highscoreMenu.js, line 70 &lt;static&gt; checkScoreValues() this is a function checks the scores and in the arrays and displays them on the screen. Source: highscoreMenu.js, line 85 Ã— Search results Close "},"loadState.html":{"id":"loadState.html","title":"Class: loadState","body":" VivaMacho Classes deathStategameStatehighscoreStateloadStatemainMenuStateshopState Class: loadState loadState new loadState() Loading state for loading all images in the cache. Source: load.js, line 1 Methods &lt;static&gt; create() this is a create function that only starts the mainMenu state. Source: load.js, line 72 &lt;static&gt; preload() this is a preload function that is fired before the create function, this is where we create variables and images Source: load.js, line 8 Ã— Search results Close "},"mainMenuState.html":{"id":"mainMenuState.html","title":"Class: mainMenuState","body":" VivaMacho Classes deathStategameStatehighscoreStateloadStatemainMenuStateshopState Class: mainMenuState mainMenuState new mainMenuState() this is the main menu state in which you can navigate to most places in the game. Properties: Name Type Description emitter Particle Particle emmiter on mouse click for confetti. menuBGMusic sound Background music for the main menu. startBackground sprite Background image for the main menu. logo sprite Logo image for the main menu. startButton object Button that starts the game. shopButton object Button that goes to the shop. highscoreButton object Button that goes to the highscore. soundButton object Button that enables sound. muteButton object Button that mutes sound. resetLocalStorageButton object Button that removes your saved data. modeButton object Button that changes the play mode. Source: mainMenu.js, line 1 Methods &lt;static&gt; update() this is a update function Source: mainMenu.js, line 90 Ã— Search results Close "},"shopState.html":{"id":"shopState.html","title":"Class: shopState","body":" VivaMacho Classes deathStategameStatehighscoreStateloadStatemainMenuStateshopState Class: shopState shopState new shopState() state in which the game is played. Properties: Name Type Description characterGroup object:array Characters in the shop. backgroundGroup object:array Backgrounds in the shop. background sprite Shop background. backButton object Button for going back to the main menu. characterButton object Buyable character button. priceText text Text above each character with the price. charactersJSON Json JSON file with all the information on the characters. pointsText text text for points. characterLock sprite lock sprite. Source: shopMenu.js, line 1 Methods &lt;static&gt; create() Used to setup the scene for this gamestate. Source: shopMenu.js, line 43 &lt;static&gt; goToMain() this is a function that returns the player to the main menu. Source: shopMenu.js, line 129 &lt;static&gt; preload() Used to set all the relevant variables in the state. Source: shopMenu.js, line 22 Ã— Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
